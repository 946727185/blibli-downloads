# blibli-downloads
# Bilibili 批量下载助手 GUI 版
这是一个基于 Python 和 customtkinter 构建的 Bilibili 视频下载工具，提供了图形用户界面，方便用户下载单视频、合集、批量下载以及进行相关设置。

## 功能特性

*   **图形用户界面**: 使用 customtkinter 提供现代化且直观的操作界面。
*   **多种下载模式**: 支持单视频、合集（包括普通合集、UP 主系列、课程等）、通过文件批量下载。
*   **灵活的下载选项**:
    *   选择不同的视频/音频清晰度。
    *   选择下载内容（视频、音频、弹幕、字幕）。
    *   自定义下载线程数（针对单个任务或全局设置）。
*   **分P选择功能**:
    *   解析视频后展示所有分P信息
    *   支持全选/取消全选
    *   可选择性下载需要的分P
*   **下载管理**: 
    *   实时显示下载进度和速度。
    *   单独的状态/日志区域展示详细信息和错误。
*   **原生API下载**:
    *   直接使用B站官方API获取视频和音频
    *   自动合并视频和音频流，确保视频音质完整
    *   多种下载方式自动备份，提高下载成功率
*   **设置中心**: 
    *   自定义下载保存路径。
    *   设置默认下载质量、内容和线程数。
    *   配置代理服务器。
*   **URL 解析**: 自动识别不同类型的 B 站链接。
*   **文件名处理**: 自动处理非法字符，确保文件名有效。

## 安装指南

1.  **确保已安装 Python**: 推荐 Python 3.8 或更高版本。
2.  **克隆或下载仓库**: 将项目文件下载到本地。
3.  **安装依赖**: 在项目根目录下打开终端或命令提示符，运行以下命令安装所需库：
    ```bash
    pip install -r requirements.txt
    ```
4.  **安装FFmpeg**: 该工具用于视频和音频的合并处理
    * Windows用户：从[FFmpeg官网](https://www.ffmpeg.org/download.html)或[gyan.dev](https://www.gyan.dev/ffmpeg/builds/)下载
    * 将FFmpeg添加到系统环境变量PATH中
    * 重启系统使环境变量生效

## 使用方法

1.  **运行程序**: 
    *   在 Windows 上，可以直接双击 `运行 GUI 程序.bat` 启动。
    *   或者在终端中运行 `python 音乐批量下载GUI.py`。
2.  **界面操作**:
    *   **单视频/合集下载**: 
        *   在输入框粘贴 B 站视频或合集链接。
        *   点击"解析"按钮，等待视频信息加载。
        *   在分 P 列表中选择想要下载的分集（默认全选）。
        *   根据需要调整下载质量、内容和线程数。
        *   点击"开始下载"。
    *   **批量下载 (文件)**:
        *   点击"选择文件"按钮，找到并选择一个包含 B 站链接的文本文件（每行一个链接）。
        *   根据需要调整下载质量、内容和线程数（这将应用于该批次所有任务）。
        *   点击"开始批量下载"。
    *   **设置**:
        *   修改下载目录、默认选项或代理设置。
        *   点击"保存设置"以应用更改。

## 特色功能

1. **智能分P选择**: 
   * 解析视频后自动显示所有分P
   * 支持一键全选/取消全选
   * 只下载你需要的内容，节省时间和空间

2. **纯API下载**: 
   * 不依赖第三方下载工具
   * 直接从B站服务器获取最高质量视频和音频
   * 使用多种备用API接口，确保高可用性

3. **音视频完整处理**:
   * 分别下载视频流和音频流以获取最佳质量
   * 使用FFmpeg专业合并，确保视频有声音
   * 支持纯音频下载和转换为MP3格式

4. **强大的错误处理**:
   * 自动重试机制，最多尝试5次
   * 详细的错误提示和状态更新
   * 备用下载方案，一种方法失败自动切换另一种

## 注意事项

*   下载速度受网络环境和 B 站服务器限制。
*   频繁下载可能触发 B 站反爬机制，程序内置了随机延迟，但仍需注意使用频率。
*   请勿将此工具用于非法用途或侵犯版权。
*   必须安装FFmpeg才能正确处理视频和音频合并。
*   某些会员视频可能需要登录后才能下载高清版本。

## 技术栈

*   **核心下载**: 纯API下载，不依赖第三方下载工具
*   **GUI 框架**: `customtkinter`
*   **网络请求**: `requests`
*   **音视频处理**: `ffmpeg`
*   **其他**: `threading` (用于后台任务)

## 快速启动指南

1. **一键启动**
   - 双击运行 `运行GUI程序.bat` 文件即可启动程序
   - 批处理脚本会自动检查环境并安装必要的依赖

2. **首次使用**
   - 启动程序后，建议先进入"设置"标签页
   - 设置默认下载路径
   - 配置默认下载质量和线程数
   - 如果需要，配置代理服务器

3. **下载视频**
   - 复制B站视频链接
   - 粘贴到程序的URL输入框
   - 点击"解析"按钮
   - 选择要下载的分P
   - 选择下载内容（视频/音频）
   - 点击"开始下载"

## 常见问题解决方案

1. **视频没有声音**
   - 确保已安装FFmpeg并添加到环境变量
   - 确保同时勾选了"视频"和"音频"选项
   - 查看是否有合并错误的提示信息

2. **程序无法启动**
   - 检查是否已安装Python（3.8或以上版本）
   - 运行 `运行GUI程序.bat` 会自动安装所需依赖
   - 如果仍有问题，可以手动执行：`pip install -r requirements.txt`

3. **下载速度慢**
   - 检查网络连接是否正常
   - 尝试在设置中配置代理服务器
   - 可以适当调整下载线程数（建议3-5个）

4. **下载失败**
   - 检查视频链接是否有效
   - 确认是否有足够的磁盘空间
   - 查看日志区域的具体错误信息
   - 如果是网络问题，可以稍后重试

5. **中文乱码**
   - 程序默认使用UTF-8编码
   - 如果遇到中文显示问题，请确保系统支持UTF-8
   - Windows用户可能需要在控制面板中设置系统区域为"中文(简体)"

6. **文件保存问题**
   - 确保有写入权限
   - 避免文件名中包含特殊字符
   - 路径中支持中文字符
   - 建议将下载路径设置在非系统盘

7. **FFmpeg相关问题**
   - Windows用户可以从 https://www.gyan.dev/ffmpeg/builds/ 下载
   - 将FFmpeg添加到系统环境变量PATH中
   - 重启程序使环境变量生效
   - 如果合并失败，程序会尝试使用备用下载方式

## 更新日志

### v1.0.1
- 修复视频没有声音的问题
- 重写下载逻辑，改用原生API下载
- 添加视频和音频流的分离下载和合并
- 优化错误处理和重试机制
- 改进分P选择功能
- 加强网络请求稳定性

### v1.0.0
- 添加基础下载功能
- 添加图形界面支持
- 添加进度显示功能
- 添加错误处理

## 技术支持

如果遇到其他问题，可以：
1. 检查程序日志输出
2. 查看错误提示信息
3. 尝试重新安装依赖
4. 确保使用最新版本的程序
5. 确保FFmpeg正确安装并配置环境变量

# 音乐批量下载工具

这是一个简单的音乐批量下载工具，支持命令行和图形界面两种使用方式。

## 功能特点

- 支持命令行批量下载
- 提供图形界面操作
- 支持进度显示
- 支持自定义保存路径
- 支持下载中断和恢复

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 命令行版本

1. 直接运行脚本：
```bash
python 音乐批量下载.py
```

2. 按提示输入视频URL和保存路径
3. 等待下载完成

### 图形界面版本

1. 运行GUI程序：
```bash
python 音乐批量下载GUI.py
```

2. 在输入框中粘贴视频URL
3. 点击"选择保存路径"按钮选择下载文件保存位置
4. 点击"开始下载"按钮开始下载
5. 等待下载完成，进度条会显示当前下载进度

## 注意事项

1. 确保网络连接正常
2. 确保有足够的磁盘空间
3. 下载过程中可以随时关闭程序，下次启动时重新下载
4. 如果下载出错，会有相应的错误提示

## 常见问题

1. 如果出现"无法获取文件大小"错误，请检查URL是否正确
2. 如果下载速度过慢，可能是网络问题，请检查网络连接
3. 如果程序无响应，可以关闭程序重新启动

## 更新日志

### v1.0.0
- 添加基础下载功能
- 添加图形界面支持
- 添加进度显示功能
- 添加错误处理 

## 快速启动指南

1. **一键启动**
   - 双击运行 `运行GUI程序.bat` 文件即可启动程序
   - 批处理脚本会自动检查环境并安装必要的依赖

2. **首次使用**
   - 启动程序后，建议先进入"设置"标签页
   - 设置默认下载路径
   - 配置默认下载质量和线程数
   - 如果需要，配置代理服务器

3. **开始下载**
   - 复制B站视频链接
   - 粘贴到程序的URL输入框
   - 点击"解析"按钮
   - 选择要下载的内容
   - 点击"开始下载"

## 常见问题解决方案

1. **程序无法启动**
   - 检查是否已安装Python（3.8或以上版本）
   - 运行 `运行GUI程序.bat` 会自动安装所需依赖
   - 如果仍有问题，可以手动执行：`pip install -r requirements.txt`

2. **下载速度慢**
   - 检查网络连接是否正常
   - 尝试在设置中配置代理服务器
   - 可以适当调整下载线程数（建议3-5个）

3. **下载失败**
   - 检查视频链接是否有效
   - 确认是否有足够的磁盘空间
   - 查看日志区域的具体错误信息
   - 如果是网络问题，可以稍后重试

4. **中文乱码**
   - 程序默认使用UTF-8编码
   - 如果遇到中文显示问题，请确保系统支持UTF-8
   - Windows用户可能需要在控制面板中设置系统区域为"中文(简体)"

5. **文件保存问题**
   - 确保有写入权限
   - 避免文件名中包含特殊字符
   - 路径中支持中文字符
   - 建议将下载路径设置在非系统盘
6.确保系统已安装 FFmpeg：
Windows用户可以从 https://www.gyan.dev/ffmpeg/builds/ 下载
将FFmpeg添加到系统环境变量PATH中
重启程序使环境变量生效

7.在下载时：
选择适当的视频质量（比如"HIGH_1080"或"BEST"）
同时勾选"视频"和"音频"选项
确保有足够的磁盘空间（因为需要下载并合并两个流）   

## 技术支持

如果遇到其他问题，可以：
1. 检查程序日志输出
2. 查看错误提示信息
3. 尝试重新安装依赖
4. 确保使用最新版本的程序

如果你喜欢该项目，就帮我点个star吧！
扫码请我喝杯奶茶吧！
![image](https://github.com/user-attachments/assets/2446c25a-afc0-4745-b30d-a95b37b6faef)


